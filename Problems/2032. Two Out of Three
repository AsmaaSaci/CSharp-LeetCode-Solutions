public class Solution
{
    public IList<int> TwoOutOfThree(int[] nums1, int[] nums2, int[] nums3)
    {
        var x = Distinct(nums1);
        var y = Distinct(nums2);
        var z = Distinct(nums3);
        var fullArrays = x.Concat(y.Concat(z));

        List<int> refs = new List<int>();
        
        var res = CounterArrays(fullArrays.ToArray());
        foreach(var item in res)
            if(item.Value >= 2)
                refs.Add(item.Key);
        
        return refs;
    }

    static Dictionary<int, int> CounterArrays(int[] nums)
    {
        Dictionary<int, int> x = new Dictionary<int, int>();
        for(int i = 0; i < nums.Length; i++)
            if(!x.ContainsKey(nums[i]))
                x.Add(nums[i], 1);
            else
                x[nums[i]]++;
        
        return x;
    }

    static int[] Distinct(int[] nums)
    {
        var x = nums.Distinct();
        return x.ToArray();
    }
}
