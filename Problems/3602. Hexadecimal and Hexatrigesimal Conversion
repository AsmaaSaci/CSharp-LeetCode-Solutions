public class Solution {
    public string ConcatHex36(int n) {
        int hexNum = n * n, htgNum = hexNum * n, hexLen = 0, htgLen = 0, i;
        for (n = hexNum; n != 0; n /= 16)
            hexLen++;
        for (n = htgNum; n != 0; n /= 36)
            htgLen++;
        var str = new char[hexLen + htgLen];
        for (n = hexNum, i = hexLen - 1; i >= 0; n /= 16, i--) {
            int d = n & 0xF;
            str[i] = (char)(d < 10 ? d + '0' : d - 10 + 'A');
        }
        for (n = htgNum, i = hexLen + htgLen - 1; i >= hexLen; n /= 36, i--) {
            int d = n % 36;
            str[i] = (char)(d < 10 ? d + '0' : d - 10 + 'A');
        }
        return new string(str);
    }
}
