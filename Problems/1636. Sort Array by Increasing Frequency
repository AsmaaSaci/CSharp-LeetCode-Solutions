public class Solution {
     public int[] FrequencySort(int[] nums)
    {
        var list = new List<int>();

        foreach (var item in GetDictSort(nums))
            for (int i = 0; i < item.Value; i++) 
                list.Add(item.Key);

        return list.ToArray();
    }

    static List<KeyValuePair<int, int>> GetDictSort(int[] nums)
    {
        var dict = new Dictionary<int, int>();
        foreach (var item in nums)
        {
            dict.TryGetValue(item, out int count);
            dict[item] = count + 1;
        }
        
        return dict
            .OrderBy(x => x.Value)            
            .ThenByDescending(x => x.Key)    
            .ToList();
    }
}
