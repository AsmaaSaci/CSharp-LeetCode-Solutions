public class Solution {
    public int MaxSubarrayLength(int[] nums, int k) {
        int left = 0, right = 0;
Dictionary<int, int> freqMap = new Dictionary<int, int>();

int maxLength = 0;
while (right < nums.Length)
{
    if (freqMap.ContainsKey(nums[right]))
    {
        freqMap[nums[right]]++;
    }
    else
    {
        freqMap[nums[right]] = 1;
    }

    while (freqMap[nums[right]] > k)
    {
        freqMap[nums[left]]--;
        left++;
    }

    maxLength = Math.Max(maxLength, right - left + 1);
    right++;
}

return maxLength;
    }
}
