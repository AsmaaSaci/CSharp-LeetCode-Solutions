public class Solution {
    public string ReformatNumber(string s) 
    {
        StringBuilder sbRes = new StringBuilder();
        int i = 0;
        int count = 0;
        int counterForHyphen = 0;


        for (i = 0; i < s.Length; ++i)
        {
            if (s[i] >= '0' && s[i] <= '9')
            {
                ++count;
            }
        }

        if (count % 3 == 0)
        {
            for (i = 0; i < s.Length; ++i)
            {
                if (s[i] >= '0' && s[i] <= '9')
                {
                    ++counterForHyphen;
                    sbRes.Append(s[i]);
                }
                if (counterForHyphen == 3)
                {
                    counterForHyphen = 0;
                    sbRes.Append('-');
                }
            }
        }        
        else if (count % 3 == 2)
        {
            for (i = 0; count > 2; ++i)
            {
                if (s[i] >= '0' && s[i] <= '9')
                {
                    --count;
                    ++counterForHyphen;
                    sbRes.Append(s[i]);
                }
                if (counterForHyphen == 3)
                {
                    counterForHyphen = 0;
                    sbRes.Append('-');
                }
            }
            for (i = i; i < s.Length; ++i)
            {
                if (s[i] >= '0' && s[i] <= '9')
                {
                    ++counterForHyphen;
                    sbRes.Append(s[i]);
                }
                if (counterForHyphen == 2)
                {
                    counterForHyphen = 0;
                    sbRes.Append('-');
                }
            }
        }   
        else if (count % 3 == 1)
        {
            for (i = 0; count > 4; ++i)
            {
                if (s[i] >= '0' && s[i] <= '9')
                {
                    --count;
                    ++counterForHyphen;
                    sbRes.Append(s[i]);
                }
                if (counterForHyphen == 3)
                {
                    counterForHyphen = 0;
                    sbRes.Append('-');
                }
            }
            for (i = i; i < s.Length; ++i)
            {
                if (s[i] >= '0' && s[i] <= '9')
                {
                    ++counterForHyphen;
                    sbRes.Append(s[i]);
                }
                if (counterForHyphen == 2)
                {
                    counterForHyphen = 0;
                    sbRes.Append('-');
                }
            }
        }
        sbRes.Remove(sbRes.Length - 1, 1);   
        return sbRes.ToString();
    }
}
