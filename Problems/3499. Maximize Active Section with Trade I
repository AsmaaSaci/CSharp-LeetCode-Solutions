public class Solution {
    public int MaxActiveSectionsAfterTrade(string s) {
            var length = s.Length;
            var oneCnt = 0;
            var start = 0;
            var zeros = new List<int>();

            for (var i = 0; i <= length; i++)
            {
                if (i == length)
                {
                    if (i > start)
                        zeros.Add(i - start);
                    start = i + 1;
                }
                else if (s[i] == '1')
                {
                    oneCnt++;
                    if (i > start)
                        zeros.Add(i - start);
                    start = i + 1;
                }
            }

            var max = 0;

            for (var i = 0; i < zeros.Count - 1; i++)
            {
                max = Math.Max(max, zeros[i] + zeros[i + 1]);
            }

            return oneCnt + max;
    }
}
