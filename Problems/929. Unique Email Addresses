public class Solution {
    public int NumUniqueEmails(string[] emails) {
        
        // Raj Thomas 22nd Aug 2025 12::53AM IST

        // main case
        HashSet<string> hs = new();

        foreach(string email in emails) {

            string[] parts = email.Split("@");

            int plusIdx = parts[0].IndexOf("+");
            if(plusIdx != -1) {
                parts[0] = parts[0].Substring(0, plusIdx);
            }
            
            parts[0] = parts[0].Replace(".", "");

            string sanitizedEmail = $"{parts[0]}@{parts[1]}";
            
            if(hs.Add(sanitizedEmail)) {
                Console.WriteLine(sanitizedEmail);
            }
        }

        return hs.Count;
    }
}
