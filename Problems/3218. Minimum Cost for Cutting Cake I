public class Solution {
    public int MinimumCost(int m, int n, int[] horizontalCut, int[] verticalCut) {
        var mapping = new Dictionary<string,int>();
        return Helper(0,0,m,n,horizontalCut,verticalCut,mapping );
    }

    private int Helper(int t_i,int t_j, int b_i,int b_j,int[] hc, int[] vc,  Dictionary<string,int> mapping)
    {
        if(b_i-t_i == 1 && b_j-t_j == 1)
            return 0;

        var key = $"{t_i},{t_j},{b_i},{b_j}";
        if(mapping.ContainsKey(key))
            return mapping[key];

        var result = int.MaxValue;
        
        for(var i = t_i+1;i< b_i;i++)
        {
            var r = Helper(t_i,t_j,i,b_j,hc,vc,mapping)
            + Helper(i,t_j,b_i,b_j,hc,vc,mapping) + hc[i-1];
            result = Math.Min(r,result);
        }

        for(var j = t_j+1;j<b_j;j++)
        {
            var r = Helper(t_i,t_j,b_i,j,hc,vc,mapping)
            + Helper(t_i,j,b_i,b_j,hc,vc,mapping) + vc[j-1];
            result = Math.Min(r,result);
        }

        mapping[key] =result;

        return result;
    }
}
